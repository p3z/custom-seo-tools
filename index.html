<html>
    <head></head>
    <body>
        <h1></h1>

        <form action="#" id="keyword_upload_form">
            <label for="keyword_list">
                Upload a csv of keywords
            </label>
            <input type="file" name="keyword_list" id="keyword_list" accept=".csv">

            <br>

            <label for="keyword_blacklist">
                Upload a csv of keywords to exclude
            </label>
            <input type="file" name="keyword_blacklist" id="keyword_blacklist" accept=".csv">
            <br>
            <input type="submit" value="Submit">
        </form>

        <br>
        <br>

        <form action="#" id ="paste_form">
            <textarea id="paste_keyword_list" placeholder="Paste your keyword list here..." rows="10" cols="40"></textarea>
            <br>
            <textarea id="paste_blacklist" placeholder="Paste your blacklist here..." rows="10" cols="40"></textarea>
            <br>
            <input type="submit" value="Submit">

        </form>
        





        <script src="./app.js"></script>

        <script>
            let keyword_upload_form = document.getElementById("keyword_upload_form");
            let keyword_list = document.getElementById("keyword_list");
            let keyword_blacklist = document.getElementById("keyword_blacklist");
            var test = null; 

            keyword_upload_form.addEventListener("submit", (e) => {
                e.preventDefault();                
                
                let keyword_list_upload = keyword_list.files[0];
                let keyword_blacklist_upload = keyword_blacklist.files[0];

                var keyword_reader = new FileReader();
                var blacklist_reader = new FileReader();

                keyword_reader.onload = function (e) {
                    const text = e.target.result;  // the CSV content as string
                 //   console.log("keyword_list event happening");

                    const keyword_list = csv2array(text);
                 //  console.log(keyword_list)



                            blacklist_reader.onload = function (e) {
                                const text = e.target.result;  // the CSV content as string
                            //   console.log("blacklist_reader event happening");

                                const blacklist = csv2array(text);
                            //   console.log(blacklist)

                         
                            // console.log(keyword_list)
                            // console.log(blacklist)

                            var test = remove_exceptions(keyword_list, blacklist);

                            // console.log("END");
                            // console.log(test)

                            }; // end blacklist reader

                            blacklist_reader.readAsText(keyword_blacklist_upload);

                }; // end keyword reader



                
              
                keyword_reader.readAsText(keyword_list_upload);
                
               
               
            })
        </script>

        <script>
                     
            var paste_form = document.getElementById('paste_form');
            var paste_keyword_list = document.getElementById('paste_keyword_list');
            var paste_blacklist = document.getElementById('paste_blacklist');

            paste_form.addEventListener("submit", (e) => {
                e.preventDefault();

                var keyword_list = e.target.paste_keyword_list.value;
                var blacklist = e.target.paste_blacklist.value;

                console.log("keyword list:")
                console.log(keyword_list);
                console.log(blacklist);

            })



        </script>
    </body>
</html>